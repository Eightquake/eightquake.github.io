<html>
	<head>
		<title>Nature</title>
		<meta charset="UTF-8">
		<style>
			body {
				width:100%;
				height:100%;
				margin:0;
			}
		</style>
		<script>
			var canvas, context, tileWidth, tileHeight;
			var population = [];
			var habitat = [
				[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
				[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
				[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
				[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
				[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
				[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
				[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1],
				[1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
				[1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
			];
			window.onload = function() {
				canvas = document.getElementById("canvas");
				context = canvas.getContext("2d");
				
				canvas.width = window.innerWidth;
				canvas.height = window.innerHeight;
				
				tileWidth = Math.round(canvas.width/habitat[0].length);
				tileHeight = Math.round(canvas.height/habitat.length);
				
				populate();
				draw();
			}
			function coll() {
				return;
			}
			function drawRect(x,y,w,h,c) {
				context.fillStyle=c;
				context.fillRect(x,y,w,h);
			}
			function Habitant() {
				var random = Math.round(Math.random()* 2);
				switch(random) {
					case 0:
						this.type="fish";
						break;
					case 1:
						this.type="bird";
						break;
					case 2:
						this.type="grass";
						break;
				}
				var x = Math.round(Math.random() * canvas.width/tileWidth);
				var y = Math.round(Math.random() * canvas.height/tileHeight);
				while(!habitat[y][x] === 0) {
					x = Math.round(Math.random() * canvas.width);
					y = Math.round(Math.random() * canvas.height);
				}
				this.x = x;
				this.y = y;
			}
			function populate() {
				if(population.length < 20) {
					for(var i=population.length;i<20;i++) {
						population[i] = new Habitant();
					}
				}
			}
			function draw() {
				requestAnimationFrame(draw);
				context.clearRect(0,0,canvas.width,canvas.height);

				drawRect(0,0,canvas.width,canvas.height,"#6D9CFF");
				
				for(var y=0;y<habitat.length;y++) {
					for(var x=0;x<habitat[y].length;x++) {
						var block = habitat[y][x];
						switch(block) {
							case 0:
								break;
							case 1:
								drawRect(x*tileWidth,y*tileHeight,tileWidth,tileHeight,"#E8761C");
								break;
							case 2:
								context.globalAlpha=0.7;
								drawRect(x*tileWidth,y*tileHeight,tileWidth,tileHeight,"#7987FF");
								context.globalAlpha=1;
								break;
						}
					}
				}
				for(var i=0;i<population.length;i++) {
					drawRect(population[i].x*tileWidth,population[i].y*tileHeight,tileWidth,tileHeight,"#CCC");
				}
			}
		</script>
	</head>
	<body>
		<canvas id="canvas"></canvas>
	</body>
</html>